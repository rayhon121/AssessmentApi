"use strict";(self["webpackChunkassessment_test_app"]=self["webpackChunkassessment_test_app"]||[]).push([[824],{5824:function(e,a,s){s.r(a),s.d(a,{default:function(){return r}});var t=s(3396),l=s(7139);const i={class:"standard-form"},o=(0,t._)("h4",{class:"display-4"},"Exams",-1);function c(e,a,s,c,m,n){const d=(0,t.up)("va-select"),u=(0,t.up)("va-input"),r=(0,t.up)("va-button"),p=(0,t.up)("va-form"),f=(0,t.up)("va-data-table");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(p,{ref:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{label:"College",modelValue:m.selectedCollege,"onUpdate:modelValue":a[0]||(a[0]=e=>m.selectedCollege=e),options:m.colleges,rules:[e=>!!e||"Field is required"]},null,8,["modelValue","options","rules"]),(0,t.Wm)(u,{label:"Exam Name",modelValue:m.examName,"onUpdate:modelValue":a[1]||(a[1]=e=>m.examName=e),rules:[e=>e&&e.length>0||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(r,{class:"mb-3",onClick:a[2]||(a[2]=e=>n.addExam())},{default:(0,t.w5)((()=>[(0,t.Uk)(" Add exam "+(0,l.zw)(e.collegeId),1)])),_:1})])),_:1},512),o,(0,t.Wm)(f,{items:m.exams},null,8,["items"])])}var m=s(65),n={setup(){const e=(0,t.f3)("$axios"),a=(0,m.oR)(),s=(0,t.f3)("appConfig");return{axios:e,store:a,config:s}},data(){return{selectedCollege:null,examName:"",colleges:[],exams:[]}},async created(){const e=await this.axios.get(`${this.config.apiUrl}/api/v1/colleges`).catch((function(e){console.log(e)}));this.colleges=e.data.map((e=>({text:e.name,value:e}))),this.reloadData()},methods:{async addExam(){let e=this.store,a=this;this.$refs.form.validate()&&await this.axios.post(`${this.config.apiUrl}/api/v1/exams`,{collegeId:this.selectedCollege.value.id,name:this.examName}).then((function(){e.commit("updateNavBarMessage",{isSuccess:!0,message:"Successfully added the exam.",isVisible:!0}),a.clearFields(),a.reloadData()})).catch((function(a){e.commit("updateNavBarMessage",{isSuccess:!1,message:a,isVisible:!0})}))},async reloadData(){let e=this;await this.axios.get(`${this.config.apiUrl}/api/v1/exams`).then((function(a){e.exams=a.data.map((e=>({id:e.id,name:e.name,college:e.college.name})))})).catch((function(a){e.store.commit("updateNavBarMessage",{isSuccess:!1,message:a,isVisible:!0})}))},clearFields(){this.$refs.form.reset(),setTimeout((()=>{this.$refs.form.resetValidation()}),1)}}},d=s(89);const u=(0,d.Z)(n,[["render",c]]);var r=u}}]);
//# sourceMappingURL=824.aad0b945.js.map