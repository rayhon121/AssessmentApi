"use strict";(self["webpackChunkassessment_test_app"]=self["webpackChunkassessment_test_app"]||[]).push([[898],{6898:function(e,s,a){a.r(s),a.d(s,{default:function(){return c}});var t=a(3396);const i={class:"standard-form"},r=(0,t.Uk)(" Add a user "),l=(0,t._)("h4",{class:"display-4"},"Users",-1);function u(e,s,a,u,n,m){const o=(0,t.up)("va-input"),d=(0,t.up)("va-button"),c=(0,t.up)("va-form"),f=(0,t.up)("va-data-table");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(c,{ref:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{label:"First Name",modelValue:n.firstName,"onUpdate:modelValue":s[0]||(s[0]=e=>n.firstName=e),rules:[e=>e&&e.length>0||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(o,{class:"mt-3",label:"Last Name",modelValue:n.lastName,"onUpdate:modelValue":s[1]||(s[1]=e=>n.lastName=e),rules:[e=>e&&e.length>0||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(o,{class:"mt-3",label:"Phone Number",modelValue:n.phoneNumber,"onUpdate:modelValue":s[2]||(s[2]=e=>n.phoneNumber=e),rules:[e=>m.isPhoneNumber(e)||"Field must be in format ###-###-####"]},null,8,["modelValue","rules"]),(0,t.Wm)(d,{class:"mb-3",onClick:s[3]||(s[3]=e=>m.addUser())},{default:(0,t.w5)((()=>[r])),_:1})])),_:1},512),l,(0,t.Wm)(f,{items:n.users},null,8,["items"])])}var n=a(65),m={setup(){const e=(0,t.f3)("$axios"),s=(0,n.oR)(),a=(0,t.f3)("appConfig");return{axios:e,store:s,config:a}},data(){return{firstName:"",lastName:"",phoneNumber:"",users:[]}},async created(){this.reloadData()},methods:{async addUser(){let e=this.store,s=this;this.$refs.form.validate()&&await this.axios.post(`${this.config.apiUrl}/api/v1/users`,{firstName:this.firstName,lastName:this.lastName,phoneNumber:this.phoneNumber}).then((function(){e.commit("updateNavBarMessage",{isSuccess:!0,message:"Successfully added the user.",isVisible:!0}),s.clearFields(),s.reloadData()})).catch((function(s){e.commit("updateNavBarMessage",{isSuccess:!1,message:s,isVisible:!0})}))},isPhoneNumber(e){const s=new RegExp("^[0-9]{3}-[0-9]{3}-[0-9]{4}$|^[0-9]{10}$");return s.test(e)},async reloadData(){let e=this;await this.axios.get(`${this.config.apiUrl}/api/v1/users`).then((function(s){e.users=s.data.map((e=>({id:e.id,name:`${e.first_name} ${e.last_name}`,phone:`${e.phone_number}`})))})).catch((function(s){e.store.commit("updateNavBarMessage",{isSuccess:!1,message:s,isVisible:!0})}))},clearFields(){this.$refs.form.reset(),setTimeout((()=>{this.$refs.form.resetValidation()}),1)}}},o=a(89);const d=(0,o.Z)(m,[["render",u]]);var c=d}}]);
//# sourceMappingURL=898.7ca7bd7e.js.map