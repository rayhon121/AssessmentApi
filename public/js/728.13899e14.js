"use strict";(self["webpackChunkassessment_test_app"]=self["webpackChunkassessment_test_app"]||[]).push([[728],{3728:function(e,s,a){a.r(s),a.d(s,{default:function(){return m}});var t=a(3396);const l={class:"standard-form"},i=(0,t.Uk)(" Add college "),o=(0,t._)("h4",{class:"display-4"},"Colleges",-1);function c(e,s,a,c,n,r){const u=(0,t.up)("va-input"),d=(0,t.up)("va-button"),m=(0,t.up)("va-form"),f=(0,t.up)("va-data-table");return(0,t.wg)(),(0,t.iD)("div",l,[(0,t.Wm)(m,{ref:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{label:"Name",modelValue:n.collegeName,"onUpdate:modelValue":s[0]||(s[0]=e=>n.collegeName=e),rules:[e=>e&&e.length>0||"Field is required"]},null,8,["modelValue","rules"]),(0,t.Wm)(d,{class:"mb-3",onClick:s[1]||(s[1]=e=>r.addCollege())},{default:(0,t.w5)((()=>[i])),_:1})])),_:1},512),o,(0,t.Wm)(f,{items:n.colleges},null,8,["items"])])}var n=a(65),r={setup(){const e=(0,t.f3)("$axios"),s=(0,n.oR)(),a=(0,t.f3)("appConfig");return{axios:e,store:s,config:a}},data(){return{collegeName:"",colleges:[]}},async created(){this.reloadData()},methods:{async addCollege(){let e=this.store,s=this;this.$refs.form.validate()&&await this.axios.post(`${this.config.apiUrl}/api/v1/colleges`,{name:this.collegeName}).then((function(){e.commit("updateNavBarMessage",{isSuccess:!0,message:"Successfully added the college.",isVisible:!0}),s.clearFields(),s.reloadData()})).catch((function(s){e.commit("updateNavBarMessage",{isSuccess:!1,message:s,isVisible:!0})}))},async reloadData(){let e=this;await this.axios.get(`${this.config.apiUrl}/api/v1/colleges`).then((function(s){e.colleges=s.data.map((e=>({id:e.id,name:e.name})))})).catch((function(s){e.store.commit("updateNavBarMessage",{isSuccess:!1,message:s,isVisible:!0})}))},clearFields(){this.$refs.form.reset(),setTimeout((()=>{this.$refs.form.resetValidation()}),1)}}},u=a(89);const d=(0,u.Z)(r,[["render",c]]);var m=d}}]);
//# sourceMappingURL=728.13899e14.js.map